# 局所領域選択・平均化フィルタ

局所領域の選択と平均化を行う AviUtl のフィルタプラグインです．

# インストール
AviUtl のルートまたは plugins フォルダに la_smooth_ks.auf をコピーします．

## ビルドについて
ビルドするには，src に入って`make`します．MSYS2 上の gcc でのビルドしか想定していないので，必要ならば`src/Makefile`を読んでよろしくやってください．

# 局所領域の選択と平均化
注目画素(★)に対し，

```text
■■□□□　□■■■□　□□□□□
■■■□□　□■■■□　□■■■□
□■★□□　□□★□□　□■★■□
□□□□□　□□□□□　□■■■□
□□□□□　□□□□□　□□□□□
```

のような9つ(向きが違うだけのものは省略)の局所領域を考え，
これらのうち，黒い部分の画素値の分散が最も小さい領域を選択し，
その領域の平均値に置き換えます．

これにより，エッジを強調しながらのスムージングが実現されます．
量子化深度を下げたような見た目を形成しつつ，スパイク状のノイズを低減する特性があります．

# 設定項目
## 注目点中心2次モーメントで領域を選択
分散の代わりに注目画素からの2次モーメントが小さい領域を選択します．
これにより，なだらかなエッジがいずれかの方向に吸収されるのを防ぎ，
細い線(≒ノイズ)が消えにくくなります．

## 色差のみ平均化
色差のみを平均化し，輝度はそのままにするので，見た目の変化がほとんどなくなります．
